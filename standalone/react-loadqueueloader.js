!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React")):"function"==typeof define&&define.amd?define(["React"],e):"object"==typeof exports?exports.ReactLoadQueueLoader=e(require("React")):t.ReactLoadQueueLoader=e(t.React)}(this,function(t){return function(t){function e(r){if(o[r])return o[r].exports;var n=o[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){var r,n,a,u,i,s,l,c,p,d=[].slice;i=o(1),a=o(2),u=i.PropTypes,p=i.DOM,c=p.span,l=p.img,s={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed"},r={loadQueue:function(t,e,o){var r;return r=t[e],null!=r&&"function"!=typeof r.enqueue?(console.warn("Context `"+e+"` must have an `enqueue` method for `"+o+"`"),!1):!0}},t.exports=n=i.createClass({displayName:"LoadQueueLoader",mixins:[a],propTypes:{loader:u.func.isRequired,priority:u.number},contextTypes:{loadQueue:r.loadQueue},getInitialState:function(){return{status:s.PENDING}},getDefaultProps:function(){return{priority:0}},componentDidMount:function(){return this.state.status===s.PENDING&&null!=this.props.src?this.enqueueLoad(this.props.src,this.props.priority):void 0},componentWillUnmount:function(){var t;return null!=(t=this.state.loadResult)&&"function"==typeof t.cancel?t.cancel():void 0},componentWillReceiveProps:function(t){var e,o;return t.src!==this.props.src?(null!=(e=this.state.loadResult)&&"function"==typeof e.cancel&&e.cancel(),this.enqueueLoad(t.src,t.priority)):t.priority!==this.props.priority&&null!=(o=this.state.loadResult)?o.priority(t.priority):void 0},enqueueLoad:function(t,e){var o,r,n;return null!=(null!=(n=this.context)?n.loadQueue:void 0)?(r=function(e){return function(o){return e.isMounted()?e.setState({status:s.LOADING,load:{src:t,callback:o}}):void 0}}(this),o=this.context.loadQueue.enqueue(r,{priority:e}),this.setState({loadResult:o})):this.setState({status:s.LOADING,load:{src:t}})},loaderDidLoad:function(){var t,e;return t=1<=arguments.length?d.call(arguments,0):[],"function"==typeof(e=this.state.load).callback&&e.callback.apply(e,[null].concat(d.call(t))),this.isMounted()?this.setState({status:s.LOADED}):void 0},loaderDidError:function(){var t,e;return t=1<=arguments.length?d.call(arguments,0):[],"function"==typeof(e=this.state.load).callback&&e.callback.apply(e,t),this.isMounted()?this.setState({status:s.FAILED}):void 0},render:function(){return this.context.loadQueue&&null==this.state.load?new this.props.loader:this.renderLoader(this.props.loader)}})},function(e){e.exports=t},function(t,e,o){var r,n,a,u,i=[].slice;n=o(1),u=o(3),r=n.PropTypes,t.exports=a={propTypes:{src:r.string,onLoad:r.func,onError:r.func},renderLoader:function(t,e){return t(u(e,{src:this.props.src,onLoad:function(t){return function(){var e,o;return e=1<=arguments.length?i.call(arguments,0):[],"function"==typeof t.loaderDidLoad&&t.loaderDidLoad.apply(t,e),"function"==typeof(o=t.props).onLoad?o.onLoad.apply(o,e):void 0}}(this),onError:function(t){return function(){var e,o;return e=1<=arguments.length?i.call(arguments,0):[],"function"==typeof t.loaderDidError&&t.loaderDidError.apply(t,e),"function"==typeof(o=t.props).onError?o.onError.apply(o,e):void 0}}(this)}))}}},function(t){function e(){for(var t={},e=0;e<arguments.length;e++){var o=arguments[e];for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])}return t}t.exports=e}])});